<main>
  <div class="guests">
    <p *ngFor="let guest of guests$ | async">
      {{ guest.firstName }} {{ guest.lastName }}
    </p>
  </div>

  <img class="divider-line" src="../../assets/line.svg" alt="divider">
  
  <section>
    <p class="rsvp-text narrow">Please join us at 2 PM for our backyard ceremony at 42 Dayton Ave.</p>
  
    <p class="rsvp-text narrow">Followed by a reception at 5 PM down the street at Posticino, 755 The Queensway.</p>
  </section>

  <img class="divider-line" src="../../assets/line-flipped.svg" alt="divider">

  <app-map class="map"></app-map>

  <img class="divider-line" src="../../assets/line.svg" alt="divider">

  <form class="rsvp-form" [formGroup]="rsvpForm" (ngSubmit)="submitRsvp()">
    <p class="rsvp-text bold">Please fill out the form below to RSVP for each guest.</p>

    <ng-container formArrayName="guests">
      <div *ngFor="let guest of rsvpFormGuests; let i = index" [formGroupName]="i" class="guest-container" >
        <div class="name-container">
          <p>{{ guest.get('firstName')?.value }} {{ guest.get('lastName')?.value }}</p> 
        </div>

        <div class="rsvp-container">
          <label for="rsvp-yes">
            <input type="radio" id="rsvp-yes" [value]="true" formControlName="rsvp" />
            Yes, I'll be there.
          </label>
          <div class="rsvp-details">
            <label for="rsvp-ceremony">
              <input type="checkbox" id="rsvp-ceremony" name="rsvp-yes-details" formControlName="rsvpCeremony">
              at the ceremony
            </label>
            <label for="rsvp-reception">
              <input type="checkbox" id="rsvp-reception" name="rsvp-yes-details" formControlName="rsvpReception">
              at the reception
            </label>
          </div>
          <label for="rsvp-no">
            <input type="radio" id="rsvp-no" [value]="false" formControlName="rsvp" />
            Sorry, can't make it.
          </label>
        </div>
      </div>
    </ng-container>

  
    <p class="rsvp-text bold">Any special accomodations to note?</p>

    <p class="rsvp-text">Dietary restrictions, allergies, etc...</p>

    <textarea formControlName="notes" class="notes-textarea"></textarea>

    <button type="submit" [disabled]="!rsvpForm.valid">Submit</button>
  </form>

  <img class="divider-line" src="../../assets/line-flipped.svg" alt="divider">

  <h2 class="thank-you-text">Thank you!</h2>

  <img class="flourish" src="../../assets/flourish.svg" alt="flourish decoration">

  <p class="registry-text">For gift ideas, please check out <a target="_blank" href="https://www.google.com">our registry</a>.</p>
</main>